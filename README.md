# mig

gradle bootRun -Dspring.profiles.active=dev,watch

java -Xms2048m -Xmx4096m -jar -Dspring.profiles.active=dev,watch E:\project\mig\build\libs\mig-0.0.1-SNAPSHOT.jar

CREATE TABEL MIG_SQL_TBL 
(
    SEQ         NUMBER,
    TBL_ASIS    VARCHAR(500),
    TBL_TOBE    VARCHAR(500),
    COL_NAME       VARCHAR2(4000),
    COL_DATA_TYPE  VARCHAR2(4000),
    SQL_WHERE   VARCHAR2(4000),
    SQL_ORDER   VARCHAR2(4000),
    DIV_PAGINATION  VARCHAR2(10),
    DIV_OUT_CNT   NUMBER,
    DIV_IN_CNT    NUMBER,
    USE_YN      CHAR(1),
    INS_DT      DATE,
    NOTE        VARCHAR2(4000)
);

INSERT INTO MIG_SQL_TBL 
SELECT 1 AS SEQ,
       'SALT_TST_REQ_BD' AS TBL_ASIS,
       'SALT_TST_REQ_BD_TMP' AS TBL_TOBE,
       LISTAGG(COLUMN_NAME, ',') WITHIN GROUP(ORDER BY COLUMN_ID) AS COL_LIST,
       LISTAGG(DATA_TYPE, ',') WITHIN GROUP(ORDER BY COLUMN_ID) AS DATE_TYPE_LIST,
       'AND ROWNUM <= 1000000' AS SQL_WHERE,
       'ORDER BY REQNO, TSTCD, TST_SEQ ' AS SQL_ORDER,
       'ORACLE' AS DIV_PAGINATION,
       40000 AS DIV_OUT_CNT,
       20000 AS DIV_IN_CNT,
      'Y' AS USE_YN,
       SYSDATE AS insDt,
       '' AS NOTE
  FROM ALL_TAB_COLUMNS 
 WHERE TABLE_NAME = 'SALT_TST_REQ_BD' AND OWNER = 'GC_NLIS'
